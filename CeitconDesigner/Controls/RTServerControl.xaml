<UserControl x:Class="Ceitcon_Designer.Controls.RTServerControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Ceitcon_Designer.Controls"
             xmlns:view="clr-namespace:Ceitcon_Designer.View"
             xmlns:model="clr-namespace:Ceitcon_Data.Model;assembly=Ceitcon_Data"
             xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
             xmlns:converters="clr-namespace:Ceitcon_Designer.Converters"
             xmlns:behaviors="clr-namespace:Ceitcon_Designer.Behaviors"
             mc:Ignorable="d"
             Loaded="UserControl_Loaded">
    <UserControl.Resources>
        <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource StandartTextBlock}"/>
        <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource StandartTextBox}"/>
        <Style TargetType="{x:Type ScrollBar}" BasedOn="{StaticResource StandartScrollBar}"/>
        <Style x:Key="MessageListBoxItem" TargetType="{x:Type ListBoxItem}">
            <Setter Property="AllowDrop" Value="True"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <ContentPresenter Content="{TemplateBinding DataContext}"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True" >
                    <Setter Property="FontWeight" Value="Bold" />
                    <Setter Property="Background" Value="Transparent" />
                </Trigger>
            </Style.Triggers>
            <Style.Resources>
                <DataTemplate DataType="{x:Type model:RTMessageModel}">
                    <Border BorderThickness="1" BorderBrush="{StaticResource BackgroundDark}" Background="{StaticResource BackgroundLight}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="50" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="80" />
                                <ColumnDefinition Width="80" />
                                <ColumnDefinition Width="100" />
                                <ColumnDefinition Width="120" />

                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="40"/>
                                <RowDefinition Height="50"/>
                            </Grid.RowDefinitions>

                            <Image Width="30" Height="30" Grid.RowSpan="2"  Source="{Binding MediaTypeImage, Mode=OneWay}" Margin="5" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            <ScrollViewer Grid.Column="1" Grid.RowSpan="2" Background="Transparent" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" VerticalAlignment="Top" HorizontalAlignment="Left" >
                                <TextBlock Text="{Binding Message}" Background="Transparent" Foreground="{StaticResource TextColor}" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" TextWrapping="Wrap"/>
                            </ScrollViewer>
                            <!--<TextBlock Text="{Binding Message}" Margin="5" Foreground="{StaticResource TextColor}" VerticalAlignment="Top" HorizontalAlignment="Left" TextWrapping="Wrap"/>-->
                            <Image Grid.Column="2" Grid.RowSpan="2" Width="70" Height="70" Margin="5" Stretch="Fill"
                                   Source="../Images/iconYoutube.png" HorizontalAlignment="Center" VerticalAlignment="Center"
                                   Visibility="{Binding HasImagePath, Converter={x:Static converters:BoolToVisibilityConverter.Collapsed}}"/>
                            
                            <Image Grid.Column="3" Width="30" Height="30" Margin="5,5,0,0" Source="../Images/iconSocialMediaControl_Active.png" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="3" Grid.Row="1" Text="{Binding SenderName}" Margin="5" Foreground="{StaticResource TextColor}" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                            <!--<Image Grid.Column="4" Width="30" Height="30" Margin="5,5,0,0" Source="../Images/iconSocialMediaControl_Active.png" HorizontalAlignment="Center" VerticalAlignment="Center"/>-->
                            <TextBlock Grid.Column="4" Grid.RowSpan="2" Text="{Binding ApprovedBy}" Margin="5" Foreground="{StaticResource TextColor}" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                            <StackPanel Grid.Column="5" Grid.RowSpan="2" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <Button Style="{StaticResource ConfirmButton}" ToolTip="Approved" VerticalAlignment="Center" Width="110" Height="30" Margin="2,2,2,2">
                                    <StackPanel Orientation="Horizontal">
                                        <Image Width="20" Height="20" Source="../Images/iconButton_OK.png" Stretch="Fill" />
                                        <TextBlock Text="Approved"  FontSize="14" Margin="5" Foreground="{StaticResource TextColor}"/>
                                    </StackPanel>
                                </Button>
                                <Button Style="{StaticResource ConfirmButton}" ToolTip="Reject" VerticalAlignment="Center" Width="110" Height="30" Margin="2,2,2,2">
                                    <StackPanel Orientation="Horizontal">
                                        <Image Width="18" Height="18" Source="../Images/iconButton_Cancel.png" Stretch="Fill" />
                                        <TextBlock Text="  Reject"  FontSize="14" Margin="5" Foreground="{StaticResource TextColor}"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </Grid>
                    </Border>
                </DataTemplate>
            </Style.Resources>
        </Style>
    </UserControl.Resources>
    <!--<StackPanel>
        <TextBlock Text="MQTT SERVER DESHBOARD" FontSize="16" Margin="5"/>
        <TextBlock Margin="5">
            <Hyperlink NavigateUri="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}, Path=ServerUrl, Mode=OneWay}" RequestNavigate="Hyperlink_RequestNavigate" >
               <Hyperlink.Inlines>
                    <Run Text="Open in browser"/>
               </Hyperlink.Inlines>
           </Hyperlink>
        </TextBlock>
        <TextBlock Text="Dafault Username: admin and Password: public" Margin="5"/>
    </StackPanel>-->
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="40"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="105"/>
            <ColumnDefinition Width="300"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.Resources>
            <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource StandartTextBlock}">
                <Setter Property="HorizontalAlignment" Value="Right" />
            </Style>
        </Grid.Resources>

        <Grid Background="LightGray" Grid.ColumnSpan="3">
            <TextBlock Text="SEND TICKER MESSAGE" Margin="5" HorizontalAlignment="Left"/>
        </Grid>

        <TextBlock Grid.Row="1" Text="Player Name: "/>
        <TextBox Grid.Row="1" Grid.Column="1" Margin="5,5,85,5" IsReadOnly="{Binding IsReadOnly}" Text="{Binding SelectedRTMessage.Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" ToolTip="{Binding SelectedRTMessage.Name, Mode=OneWay}"/>
        <Button Grid.Row="1" Grid.Column="1" HorizontalAlignment="Right" Margin="5,5,40,5" Style="{StaticResource ConfirmButton}" Width="40" ToolTip="Select location" Click="SearchNetwork_Click">
            <Image Source="../Images/iconButton_SearchWhite.png" Height="16"/>
        </Button>
        <CheckBox x:Name="cbToAll" Grid.Row="1" Grid.Column="1" Margin="5,7,13,0" HorizontalAlignment="Right" Checked="CheckBox_Checked"/>
        <TextBlock Grid.Row="1" Grid.Column="1" Margin="5,20,5,5" Text="To All" FontSize="12" HorizontalAlignment="Right" />

        <!--<TextBox Grid.Row="1" Grid.Column="1" Text="{Binding SelectedRTMessage.Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="5" MaxLength="50">
            <i:Interaction.Behaviors>
                <behaviors:TextBoxEnterKeyUpdateBehavior />
            </i:Interaction.Behaviors>
        </TextBox>-->

        <TextBlock Grid.Row="2" Text="Ticker Id: "/>
        <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding SelectedRTMessage.Topic, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="5" MaxLength="50">
            <i:Interaction.Behaviors>
                <behaviors:TextBoxEnterKeyUpdateBehavior />
            </i:Interaction.Behaviors>
        </TextBox>

        <TextBlock Grid.Row="3" Text="Ticker Message: "/>
        <TextBox Grid.Row="3" Grid.Column="1" Text="{Binding SelectedRTMessage.Message, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="5" MaxLength="500">
            <i:Interaction.Behaviors>
                <behaviors:TextBoxEnterKeyUpdateBehavior />
            </i:Interaction.Behaviors>
        </TextBox>

        <Button Grid.Row="4" Grid.Column="1" Style="{StaticResource ConfirmButton}" ToolTip="Send Message to Player" VerticalAlignment="Bottom" HorizontalAlignment="Left" Width="150" Margin="5,10"
                Command="view:CustomCommands.SendRTMessage">
            <StackPanel Orientation="Horizontal" >
                <Image Source="../Images/iconButton_Send.png" Width="22" Height="22" Margin="5"/>
                <TextBlock Text="Send Message" FontSize="16" Margin="5,8,5,5"/>
            </StackPanel>
        </Button>

        <Grid Background="LightGray" Grid.Row="5" Grid.ColumnSpan="3">
            <TextBlock Text="SOCIAL MEDIA LIST" Margin="10" HorizontalAlignment="Left"/>
        </Grid>
        
        <Button Grid.Row="5" Grid.Column="2" Style="{StaticResource ConfirmButton}" ToolTip="Refresh list, auto refresh is automaticly on every 5 seconds" VerticalAlignment="Center" HorizontalAlignment="Right" Width="120" Margin="0,0,5,0" Click="RefreshListButton_Click">
            <StackPanel Orientation="Horizontal" >
                <Image Source="../Images/iconButton_Refresh.png" Width="22" Height="22" Margin="2"/>
                <TextBlock Text="Refresh" FontSize="16" Margin="5,8,5,5"/>
            </StackPanel>
        </Button>

        <!--Facebook-->
        <Grid Grid.Row="6" Grid.ColumnSpan="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="50" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="80" />
                <ColumnDefinition Width="80" />
                <ColumnDefinition Width="100" />
                <ColumnDefinition Width="120" />
            </Grid.ColumnDefinitions>
            <TextBlock Grid.Column="0" Text="TYPE" Margin="5" HorizontalAlignment="Center"/>
            <TextBlock Grid.Column="1" Text="MESSAGE" Margin="5" HorizontalAlignment="Center"/>
            <TextBlock Grid.Column="2" Text="IMAGE" Margin="5" HorizontalAlignment="Center"/>
            <TextBlock Grid.Column="3" Text="SENDER" Margin="5" HorizontalAlignment="Center"/>
            <TextBlock Grid.Column="4" Text="APPROVED BY" Margin="5" HorizontalAlignment="Center"/>
        </Grid>

        <ListBox 
            Grid.Row="7"
            Grid.ColumnSpan="3" 
            BorderThickness="0"
            HorizontalContentAlignment="Stretch"
            VerticalAlignment="Stretch"
            Background="Transparent"
            ScrollViewer.HorizontalScrollBarVisibility="Disabled"  
            ScrollViewer.VerticalScrollBarVisibility="Auto"
            ItemContainerStyle="{StaticResource MessageListBoxItem}"
            ItemsSource="{Binding RTMessages, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
            <!--SelectedItem="{Binding SelectedRTMessage, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"-->
    </Grid>
</UserControl>
