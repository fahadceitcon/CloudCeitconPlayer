<UserControl x:Class="Ceitcon_Designer.Controls.SchedulerControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Ceitcon_Designer.Controls"
             mc:Ignorable="d" 
             xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation">

    <UserControl.Resources>
        <!--<Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource StandartTextBlock}"/>
        <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource StandartTextBox}"/>-->
        <!--<Style TargetType="{x:Type ScrollBar}" BasedOn="{StaticResource StandartScrollBar}"/>-->
        
        <SolidColorBrush x:Key="RadScheduleForeground" Color="Black" />

        <telerik:InvertedBooleanToVisibilityConverter x:Key="InvertedBooleanToVisibilityConverter" />
        <telerik:InvertedNullToVisibilityConverter x:Key="InvertedNullToVisibilityConverter" />
        <telerik:InvertedVisibilityConverter x:Key="InvertedVisibilityConverter" />
        <telerik:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
        <telerik:InvertedBooleanConverter x:Key="InvertedBooleanConverter" />

        <telerik:NullToVisibilityConverter x:Key="NullToVisibilityConverter" />

        <telerik:LocalizationManager x:Key="LocalizationManager" />
        <telerik:BoolToInputModeConverter x:Key="BoolToInputModeConverter" />

        <ControlTemplate x:Key="EditAppointmentTemplate" TargetType="telerik:SchedulerDialog">
            <Grid IsSharedSizeScope="True" x:Name="DialogRoot">
                <!--<Grid.Resources>
                    <example:CustomDialogViewModel
						Duration="{Binding DataContext.Occurrence.Appointment.Duration, ElementName=DialogRoot, Mode=TwoWay}"
						Start="{Binding DataContext.ActualStart, ElementName=DialogRoot, Mode=TwoWay}"
						End="{Binding DataContext.ActualEnd, ElementName=DialogRoot, Mode=TwoWay}"
						x:Key="CustomDialogViewModel" />
                </Grid.Resources>-->
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid x:Name="Details" Grid.Row="2" Margin="6">
                    <Grid.Resources>
                        <telerik:InputMode x:Key="RadDateTimePickerInputModeDatePicker">DatePicker</telerik:InputMode>
                    </Grid.Resources>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition MinWidth="100" SharedSizeGroup="LabelsGroup" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Row="0" Grid.Column="0" Margin="6" Text="Player" />
                    <TextBox Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="2" Margin="3,3,30,3" IsReadOnly="{Binding IsReadOnly}" 
                             Foreground="{StaticResource TextColor}"
                             Text="{Binding Occurrence.Appointment.Subject, ValidatesOnDataErrors=True, NotifyOnValidationError=True, Mode=TwoWay}"
                             ToolTip="{Binding Occurrence.Appointment.Subject, Mode=OneWay}"/>
                    <Button Grid.Row="0" Grid.Column="2" HorizontalAlignment="Right" Margin="3" 
                            ToolTip="Search location in tree view" Click="SearchNetwork_Click">
                        <Image Source="../Images/iconButton_Search.png" Height="16"/>
                    </Button>

                    <TextBlock Grid.Row="1" Grid.Column="0" Margin="6" Text="Project" />
                    <TextBox Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2" Margin="3" IsReadOnly="{Binding IsReadOnly}"
                             Foreground="{StaticResource TextColor}"
                             Text="{Binding Occurrence.Appointment.Body,ValidatesOnDataErrors=True, NotifyOnValidationError=True, Mode=TwoWay}" TextWrapping="Wrap" />
                    <TextBlock Grid.Row="2" Grid.Column="0" Margin="6" telerik:LocalizationManager.ResourceKey="StartTime" />
                    <telerik:RadDateTimePicker Grid.Row="2" Grid.Column="1" Margin="3" Foreground="{StaticResource TextColor}"
                                               IsReadOnly="{Binding IsReadOnly}"
											   Culture="{Binding DefaultCulture,Source={StaticResource LocalizationManager}}" 
											   SelectedValue="{Binding Occurrence.Appointment.Start, ValidatesOnDataErrors=True, NotifyOnValidationError=True, Mode=TwoWay}"
											   IsEnabled="{Binding IsNotRecurrent}" InputMode="{Binding IsAllDayEvent, Converter={StaticResource BoolToInputModeConverter}, ConverterParameter={x:Static telerik:InputMode.DatePicker}}" />
                    <TextBlock Grid.Row="3" Grid.Column="0" Margin="6" VerticalAlignment="Center" telerik:LocalizationManager.ResourceKey="EndTime" />

                    <telerik:RadDateTimePicker Grid.Row="3" Grid.Column="1" Margin="3" Foreground="{StaticResource TextColor}"
                                               IsReadOnly="{Binding IsReadOnly}"
											   Culture="{Binding DefaultCulture,Source={StaticResource LocalizationManager}}" 
                                               SelectedValue="{Binding Occurrence.Appointment.End, ValidatesOnDataErrors=True, NotifyOnValidationError=True, Mode=TwoWay}"
											   IsEnabled="{Binding IsNotRecurrent}" InputMode="{Binding IsAllDayEvent, Converter={StaticResource BoolToInputModeConverter}, ConverterParameter={x:Static telerik:InputMode.DatePicker}}" />
                </Grid>

                <StackPanel Grid.Row="4" Margin="13 6" HorizontalAlignment="Right" Orientation="Horizontal">
                    <telerik:RadButton Margin="2" MinWidth="84" Command="{x:Static telerik:WindowCommands.Confirm}" telerik:LocalizationManager.ResourceKey="Ok" telerik:RadWindow.ResponseButton="Accept">
                        <ToolTipService.ToolTip>
                            <TextBlock telerik:LocalizationManager.ResourceKey="SaveAndClose" />
                        </ToolTipService.ToolTip>
                    </telerik:RadButton>
                    <telerik:RadButton Margin="2" MinWidth="84" IsCancel="true" Command="{x:Static telerik:WindowCommands.Cancel}" telerik:LocalizationManager.ResourceKey="Cancel" telerik:RadWindow.ResponseButton="Cancel" />
                </StackPanel>
            </Grid>
        </ControlTemplate>
        <Style x:Key="EditAppointmentDialogStyle" TargetType="telerik:SchedulerDialog">
            <Setter Property="Foreground" Value="{StaticResource RadScheduleForeground}" />
            <Setter Property="Width" Value="560" />
            <Setter Property="IsTabStop" Value="False" />
            <Setter Property="SnapsToDevicePixels" Value="True" />
            <Setter Property="Template" Value="{StaticResource EditAppointmentTemplate}" />
            <Setter Property="HeaderTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" MaxWidth="400" HorizontalAlignment="Left">
                            <TextBlock Text="Scheduler Dialog" />
                            <TextBlock Text=" - " />
                            <TextBlock x:Name="SubjectTextBlock" Text="{Binding Occurrence.Appointment.Subject}" Visibility="{Binding Occurrence.Appointment.Subject, Converter={StaticResource NullToVisibilityConverter}}" />
                        </StackPanel>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
            <!--<Setter Property="IconTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <Image Stretch="None" Source="/Telerik.Windows.Controls.ScheduleView;component/Themes/Images/EditAppointment.png" RenderOptions.BitmapScalingMode="NearestNeighbor" RenderOptions.EdgeMode="Aliased" />
                    </DataTemplate>
                </Setter.Value>
            </Setter>-->
        </Style>
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*" MinHeight="100"/>
        </Grid.RowDefinitions>
        <Button Style="{StaticResource ConfirmButton}" ToolTip="Add Activ Project to Scheduler" VerticalAlignment="Bottom" HorizontalAlignment="Left" Width="200" Margin="0,0,0,5"
                Click="AddSchedulerButton_Click">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Image Source="../Images/iconButton_AddScheduler.png" Width="30" Height="30" Margin="5,5,5,5"/>
                <TextBlock Text="Add Project" Margin="5,8,5,5"/>
            </StackPanel>
        </Button>
        <Button Style="{StaticResource ConfirmButton}" ToolTip="Test Server Connection" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="200" Height="40" Margin="5,0,210,5"
                Click="TestConnectionButton_Click">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Image Source="../Images/iconButton_Connection.png" Width="30" Height="30" Margin="5,5,5,5"/>
                <TextBlock Text="Test Connection" Margin="5,8,5,5"/>
            </StackPanel>
        </Button>
        <Button Style="{StaticResource ConfirmButton}" ToolTip="Upload Project Changes to Server" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="200" Height="40" Margin="5,0,0,5"
                Click="UploadButton_Click">
            <StackPanel Orientation="Horizontal">
                <Image Source="../Images/iconButton_Upload.png" Width="30" Height="30" Margin="5,5,5,5"/>
                <TextBlock Text="Upload Changes" Margin="5,8,5,5"/>
            </StackPanel>
        </Button>
        <telerik:RadScheduleView Grid.Row="1" Name="xRadScheduleView" 
                                 ActiveViewDefinitionIndex = "2"
                                 AppointmentsSource="{Binding Appointments, Mode=TwoWay}"
                                 AppointmentCreated="xRadScheduleView_AppointmentCreated"
                                 AppointmentDeleting="xRadScheduleView_AppointmentDeleting"
                                 AppointmentEditing="xRadScheduleView_AppointmentEditing"
                                 AppointmentEdited="xRadScheduleView_AppointmentEdited"
                                 ShowDialog="RadScheduleView_ShowDialog"
                                 EditAppointmentDialogStyle="{StaticResource EditAppointmentDialogStyle}">
            <telerik:RadScheduleView.ViewDefinitions>
                <telerik:DayViewDefinition />
                <telerik:WeekViewDefinition />
                <telerik:MonthViewDefinition />
                <telerik:TimelineViewDefinition />
            </telerik:RadScheduleView.ViewDefinitions>
            <!--<telerik:RadScheduleView.SchedulerDialogHostFactory>
                <local:CustomScheduleViewDialogHostFactory />
            </telerik:RadScheduleView.SchedulerDialogHostFactory>-->
        </telerik:RadScheduleView>
    </Grid>
</UserControl>
